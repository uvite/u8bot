---
sessions:
  binance:
    exchange: binance
    envVarPrefix: binance
    #    margin: true
    #    isolatedMargin: true
    #    isolatedMarginSymbol: ETHUSDT
    futures: true

exchangeStrategies:
  - on: binance
    newdmi:
      symbol: ETHUSDT
      interval: 1m
      window: 120


      dmiCross:
        stoploss: 1.2%
        windowATR: 1
        windowATR2: 10
        windowHMA: 10
        windowCCI: 14
        windowALMA: 130
        windowMACD: 5
        windowRSI: 14
        windowSTOCH: 8
        windowDMI: 14

        windowQuick: 9
        windowSlow: 360


        maType: "dema"

        source: close
        # ratio is how much the price breaks the previous low to trigger the short.
        ratio: 0%

        # quantity is used for submitting the sell order
        # if quantity is not set, all base balance will be used for selling the short.
        quantity: 0.1
        leverage: 1.0
        # marketOrder submits the market sell order when the closed price is lower than the previous pivot low.
        # by default we will use market order
        marketOrder: true

        # limitOrder place limit order to open the short position instead of using market order
        # this is useful when your quantity or leverage is quiet large.
        limitOrder: false

        # limitOrderTakerRatio is the price ratio to adjust your limit order as a taker order. e.g., 0.1%
        # for sell order, 0.1% ratio means your final price = price * (1 - 0.1%)
        # for buy order, 0.1% ratio means your final price = price * (1 + 0.1%)
        # this is only enabled when the limitOrder option set to true
        limitOrderTakerRatio: 0

        # bounceRatio is used for calculating the price of the limit sell order.
        # it's ratio of pivot low bounce when a new pivot low is detected.
        # Sometimes when the price breaks the previous low, the price might be pulled back to a higher price.
        # The bounceRatio is useful for such case, however, you might also miss the chance to short at the price if there is no pull back.
        # Notice: When marketOrder is set, bounceRatio will not be used.
        # bounceRatio: 0.1%

        # stopEMA is the price range we allow short.
        # Short-allowed price range = [current price] > [EMA] * (1 - [stopEMARange])
        # Higher the stopEMARange than higher the chance to open a short
        stopEMA:
          interval: 1h
          window: 99
          range: 2%

        trendEMA:
          interval: 1d
          window: 7

      exits:
        # roiStopLoss is the stop loss percentage of the position ROI (currently the price change)
        - roiStopLoss:
            percentage: 2%

        # roiTakeProfit is used to force taking profit by percentage of the position ROI (currently the price change)
        # force to take the profit ROI exceeded the percentage.
        - roiTakeProfit:
            percentage: 30%

        - protectiveStopLoss:
            activationRatio: 1%
            stopLossRatio: 0.2%
            placeStopOrder: true

        # lowerShadowTakeProfit is used to taking profit when the (lower shadow height / low price) > lowerShadowRatio
        # you can grab a simple stats by the following SQL:
        # SELECT ((close - low) / close) AS shadow_ratio FROM okex_klines WHERE symbol = 'ETHUSDT' AND `interval` = '5m' AND start_time > '2022-01-01' ORDER BY shadow_ratio DESC LIMIT 20;
        - lowerShadowTakeProfit:
            ratio: 3%

        # cumulatedVolumeTakeProfit is used to take profit when the cumulated quote volume from the klines exceeded a threshold
        - cumulatedVolumeTakeProfit:
            minQuoteVolume: 90_000_000
            window: 5

sync:
  userDataStream:
    trades: true
    filledOrders: true
  sessions:
    - binance
  symbols:
    - ETHUSDT
    -
backtest:
  sessions:
    - okex
  startTime: "2022-05-25"
  endTime: "2022-06-03"
  symbols:
    - ETHUSDT
  accounts:
    okex:
      balances:
        ETH: 3_000.0
        USDT: 3_000.0
